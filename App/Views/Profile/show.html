{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block body %}

<main>
    <article>
        <div class="px-4 my-4 text-center">
            <div class="col-lg-6 mx-auto mt-3">
                {% for message in flashMessages %}
                <div class="alert alert-{{ message.type }}">
                    {{ message.body }}
                </div>
                {% endfor %}
            </div>
            <h2 class="display-6 fw-bold text-body-emphasis">Profile</h2>
            <div class="col-lg-6 mx-auto mt-3 col-incomes border rounded-3 bg-body-tertiary">
                <h2 class="py-3">Details</h2>
                <div class="container text-center px-5 pb-4">
                    <div class="row row-data border rounded-3 mb-3">
                        <div class="row mb-3">
                            <div class="col-sm-3 col-title">Name</div>
                            <div class="col-sm-9">{{ user.name }}</div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 col-title">Email</div>
                            <div class="col-sm-9">{{ user.email }}</div>
                        </div>
                    </div>
                    <hr class="my-4">
                    <div class="col-sm-4 mx-auto">
                        <a href="/profile/edit" class="w-100 btn btn-primary" role="button">Edit</a>
                    </div>
                        <div class="col-sm-4 mx-auto mt-4">
                            <a id="deleteButton" class="w-100 btn btn-danger" role="button">Delete account</a>
                        </div>

                </div>
            </div>
        </div>
          <div id="dialog-confirm" title="Are You sure?">
          </div>     
            
    </article>
</main>

{% endblock %}


{% block footer %}

<script>
$( function() {
    $('#dialog-confirm').dialog({
      dialogClass: 'delete-dialog',
      draggable: false,
      autoOpen: false,
      resizable: false,
      height: 'auto',
      width: 400,
      modal: true,
      show: {
        effect: 'fade',
        duration: 500
      },
      buttons: [
        {
          text: 'Delete',
          class: 'custom-button custom-delete-button',
          click: function() {
            var frm = $('<form>');
            frm.attr('method', 'post');
            frm.attr('action', '/profile/delete');
            frm.appendTo('body');
            frm.submit();
        }
        },
        {
          text: "Cancel",
          class: 'custom-button custom-cancel-button',
          click: function() {
            $(this).dialog("close");
          }
        }
      ]
    });
  } );

  $('#deleteButton').on('click', function() {
    $('#dialog-confirm').dialog('open');
  });

  $(window).resize(function() {
    $('#dialog-confirm').dialog('option', 'position', {
      my: 'center', 
      at: 'center', 
      of: window});
  });



    </script>

{% endblock %}